{{template "header" .}}
{{ $username := ""}}
{{ if .my_user_model.Username}}
  {{template "menu_user" .}}
  
{{ else }}
  {{ template "menu" . }}
  
{{ end }}
<ul class="error-messages">
    {{ if .ErrorTitle}}
    <li>{{.ErrorTitle}}</li>
    <li>{{.ErrorMessage}}</li>
    {{end}}
  </ul>
<div class="article-page">

  <div class="banner">
    <div class="container">

      <h1>{{.ArticleModel.Title }}</h1>

      <div class="article-meta">
        <a href=""><img src="{{.ArticleModel.Author.Image}}" /></a>
        <div class="info">
          <a href="" class="author">{{.ArticleModel.Author.Username}}</a>
          <span class="date">{{.ArticleModel.CreatedAt}}</span>
        </div>
        <button class="btn btn-sm btn-outline-secondary">
          <i class="ion-plus-round"></i>
          &nbsp;
          Follow {{.ArticleModel.Author.Username}} <span class="counter">(?)</span>
        </button>
        &nbsp;&nbsp;
        <button class="btn btn-sm btn-outline-primary">
          <i class="ion-heart"></i>
          &nbsp;
          Favorite Post <span class="counter">({{.ArticleModel.FavoritesCount}})</span>
        </button>
      </div>

    </div>
  </div>

  <div class="container page">

    <div class="row article-content">
      <div class="col-md-12">
        {{.ArticleModel.Body}}
      </div>
    </div>

    <hr />

    <div class="article-actions">
      <div class="article-meta">
        <a href="profile.html"><img src="{{.ArticleModel.Author.Image}}" /></a>
        <div class="info">
          <a href="" class="author">{{.ArticleModel.Author.Username}}</a>
          <span class="date">{{.ArticleModel.CreatedAt}}</span>
        </div>

        <button class="btn btn-sm btn-outline-secondary">
          <i class="ion-plus-round"></i>
          &nbsp;
          Follow Eric Simons <span class="counter">(10)</span>
        </button>
        &nbsp;
        <button class="btn btn-sm btn-outline-primary">
          <i class="ion-heart"></i>
          &nbsp;
          Favorite Post <span class="counter">(29)</span>
        </button>
      </div>
    </div>

    <div class="row">

      <div class="col-xs-12 col-md-8 offset-md-2">

        <form class="card comment-form" action="/article/{{.ArticleModel.Slug}}/comments" method="post">
          <div class="card-block">
            <textarea name="body" class="form-control" placeholder="Write a comment..." rows="3"></textarea>
          </div>
          <div class="card-footer">
            <img src="{{.my_user_model.Image}}" class="comment-author-img" />
            <button type="submit" class="btn btn-sm btn-primary">
             Post Comment
            </button>
          </div>
        </form>
        {{ $username := .my_user_model.Username}}
        {{ $slug := .ArticleModel.Slug}}
        {{range .Comments}}
        
        <div class="card">
          <div class="card-block">
            <p class="card-text">{{.Body}}</p>
          </div>
          <div class="card-footer">
            <a href="/@{{.Author.Username}}" class="comment-author">
              <img src="{{.Author.Image}}" class="comment-author-img" />
            </a>
            &nbsp;
            <a href="/@{{.Author.Username}}" class="comment-author">{{.Author.Username}}</a>
            <span class="date-posted">{{.UpdatedAt}}</span>

            {{ if eq $username .Author.Username }}
            
            <span class="mod-options">
              <a href="/article/{{$slug}}/comment/{{.ID}}" class="comment-author">
              <i class="ion-trash-a"></i>
              </a>
            </span>

            {{end}}
          </div>
        </div>
        {{end}}

        
      </div>

    </div>

  </div>

</div>
{{template "footer" .}}